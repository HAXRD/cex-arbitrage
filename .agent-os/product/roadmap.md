# 产品路线图

## 开发策略

本路线图遵循MVP（最小可行产品）原则，优先实现核心价值功能，通过快速迭代验证产品可行性。每个阶段都有明确的成功标准，确保项目稳步推进。

---

## Phase 1: 实时监控与可视化（MVP核心）

**目标：** 实现基础的实时价格监控和可视化展示，能够捕捉并高亮异常价格波动

**成功标准：** 
- 能够稳定监控至少50个合约交易对的实时价格
- 前端能实时展示价格变化，延迟小于1秒
- 用户可配置过滤条件并看到符合条件的高亮提醒
- 历史价格数据能够正确存储和查询

**预计时长：** 3-4周

### 核心功能

- [x] **项目初始化** - 搭建基础开发环境 `XS` ✅ **已完成**
  - 创建Go项目结构（后端）
  - 创建React项目（前端）
  - 配置Docker Compose（PostgreSQL + Redis）
  - 配置开发工具（linter、formatter）

- [x] **BitGet API集成** - 实现交易所数据获取 `S` ✅ **已完成**
  - 封装BitGet REST API客户端（获取合约列表、K线数据）
  - 实现WebSocket连接管理（订阅实时价格）
  - 实现自动重连和错误处理机制
  - 支持批量订阅多个交易对

- [x] **数据存储设计** - 设计并实现数据库表结构 `S` ✅ **已完成**
  - 设计PostgreSQL数据库表（symbols、price_ticks、klines）
  - 配置TimescaleDB时序表和索引
  - 实现数据访问层（DAO）
  - 设计Redis缓存键值结构

- [x] **实时数据采集服务** - 实现后端数据采集和处理 `M` ✅ **已完成**
  - 实现多协程数据采集（支持100+交易对）
  - 实时计算价格变化率（1m、5m、15m窗口）
  - 将实时数据写入Redis缓存
  - 异步持久化历史数据到PostgreSQL
  - 实现数据采集监控和日志

- [x] **WebSocket推送服务** - 实现前后端实时通信 `S` ✅ **已完成**
  - 实现WebSocket服务器（Gorilla WebSocket）
  - 实现消息广播机制
  - 支持客户端订阅特定交易对
  - 实现心跳检测和断线重连

- [ ] **REST API开发** - 实现业务接口 `M`
  - 获取交易对列表API
  - 查询历史K线数据API
  - 配置管理API（保存/加载过滤条件）
  - 查询实时价格API
  - 集成Swagger文档

- [ ] **前端基础框架** - 搭建React前端架构 `S`
  - 配置Vite + React + TypeScript项目
  - 集成Ant Design和Tailwind CSS
  - 配置路由和状态管理（Zustand）
  - 实现基础布局（导航栏、侧边栏）
  - 配置WebSocket客户端连接

- [ ] **实时监控仪表板** - 实现核心监控界面 `L`
  - 展示所有监控中的交易对列表
  - 实时更新价格和涨跌幅（WebSocket）
  - 根据过滤条件高亮符合条件的交易对
  - 实现表格排序和筛选功能
  - 添加声音/视觉告警提醒
  - 展示24h成交量、价格区间等信息

- [ ] **过滤条件配置面板** - 实现用户配置界面 `M`
  - 可视化配置时间窗口（1m、5m、15m、30m）
  - 配置涨跌幅阈值（百分比或绝对值）
  - 配置成交量过滤条件
  - 保存和加载配置方案
  - 预设多个常用配置模板

- [ ] **K线图表展示** - 实现价格图表可视化 `M`
  - 集成Lightweight Charts库
  - 展示单个交易对的K线图
  - 支持多时间周期切换（1m、5m、15m、1h）
  - 标记关键价格波动点
  - 显示实时价格线

- [ ] **历史数据查询** - 实现历史数据浏览 `S`
  - 按时间范围查询历史价格
  - 展示历史涨跌幅统计
  - 支持导出CSV格式数据
  - 实现数据分页加载

### 技术依赖
- Go 1.21+、Gin、Gorilla WebSocket
- PostgreSQL 15+ with TimescaleDB
- Redis 7+
- React 18+、Vite、Ant Design、Lightweight Charts

---

## Phase 2: 策略回测与验证

**目标：** 实现基于历史数据的策略回测功能，验证交易策略的可行性

**成功标准：**
- 能够基于真实历史数据进行策略回测
- 提供详细的回测报告（收益率、胜率、最大回撤等）
- 支持参数优化，找到最优策略配置
- 回测结果可视化展示

**预计时长：** 2-3周

### 核心功能

- [ ] **回测引擎开发** - 实现策略回测核心逻辑 `L`
  - 设计回测框架（事件驱动架构）
  - 实现模拟交易执行（开仓、平仓、止损止盈）
  - 计算交易手续费和滑点
  - 支持多种策略类型（突破策略、均值回归等）
  - 实现杠杆和保证金计算

- [ ] **历史数据回放** - 实现时间序列数据回放 `M`
  - 按时间顺序回放历史行情数据
  - 支持快速回放和逐步回放模式
  - 模拟实时数据流环境
  - 处理数据缺失和异常情况

- [ ] **策略定义接口** - 实现策略配置和管理 `M`
  - 定义策略参数结构（入场条件、出场条件、止损止盈）
  - 实现策略CRUD接口
  - 支持策略模板（预设常用策略）
  - 策略版本管理

- [ ] **绩效指标计算** - 实现回测结果分析 `M`
  - 计算总收益率、年化收益率
  - 计算胜率、盈亏比
  - 计算最大回撤、最大连续亏损
  - 计算夏普比率、卡玛比率
  - 分析交易分布（盈利/亏损分布）

- [ ] **参数优化功能** - 实现策略参数寻优 `L`
  - 支持网格搜索（Grid Search）
  - 批量执行多组参数回测
  - 对比不同参数的表现
  - 寻找最优参数组合
  - 避免过拟合（交叉验证）

- [ ] **回测报告生成** - 实现可视化回测报告 `M`
  - 生成回测摘要（关键指标）
  - 展示资金曲线图
  - 展示交易明细列表
  - 展示每笔交易在K线上的标记
  - 导出PDF/HTML格式报告

- [ ] **回测结果对比** - 实现多策略对比分析 `S`
  - 对比多个策略的表现
  - 策略排行榜
  - 可视化对比图表

### 技术依赖
- Go标准库（time、math）
- 数据科学库（统计计算）
- 前端图表库（ECharts或Chart.js）

---

## Phase 3: 自动化交易执行（未来扩展）

**目标：** 实现自动化交易执行功能，将策略信号转化为实际交易

**成功标准：**
- 能够根据策略信号自动下单
- 支持风险管理（仓位控制、止损止盈）
- 提供手动干预和紧急停止功能
- 交易执行日志完整可追溯

**预计时长：** 2-3周

### 核心功能

- [ ] **实盘交易接口** - 实现BitGet交易API集成 `M`
- [ ] **订单管理系统** - 实现订单生命周期管理 `L`
- [ ] **风险控制模块** - 实现风险管理规则 `L`
- [ ] **策略执行引擎** - 实现策略信号到交易的转换 `M`
- [ ] **仓位管理** - 实现仓位跟踪和管理 `M`
- [ ] **交易监控面板** - 实现实盘交易监控界面 `M`
- [ ] **交易日志和审计** - 记录所有交易操作 `S`

### 依赖
- 完成Phase 1和Phase 2
- BitGet交易API权限（需要实盘API Key）

---

## Phase 4: 高级功能与优化（长期规划）

**目标：** 增强系统功能和性能，提升用户体验

**预计时长：** 持续迭代

### 核心功能

- [ ] **多交易所支持** - 扩展到OKX、Binance等交易所 `L`
- [ ] **智能告警系统** - 多渠道告警（邮件、Telegram、钉钉） `M`
- [ ] **策略市场** - 分享和订阅策略 `L`
- [ ] **移动端应用** - 开发移动端监控App `XL`
- [ ] **AI辅助分析** - 使用机器学习预测价格趋势 `XL`
- [ ] **社区功能** - 用户交流和策略分享 `L`
- [ ] **性能优化** - 支持1000+交易对监控 `L`
- [ ] **高可用架构** - 实现分布式部署和容灾 `XL`

### 依赖
- 前期阶段完成并验证
- 用户反馈和需求分析

---

## 工作量估算标准

- **XS (超小)：** 1天以内
- **S (小)：** 2-3天
- **M (中)：** 4-7天（1周）
- **L (大)：** 2周
- **XL (超大)：** 3周以上

---

## 当前优先级

🚀 **立即开始：** Phase 1 - 实时监控与可视化

**已完成：**
- ✅ 项目初始化 - 搭建基础开发环境
- ✅ BitGet API集成 - 实现交易所数据获取
- ✅ 数据存储设计 - 设计并实现数据库表结构
- ✅ 实时数据采集服务 - 实现后端数据采集和处理
- ✅ WebSocket推送服务 - 实现前后端实时通信

**下一步行动：** REST API开发 - 实现业务接口

重点关注：
1. 获取交易对列表API
2. 查询历史K线数据API
3. 配置管理API（保存/加载过滤条件）
4. 查询实时价格API
5. 集成Swagger文档

