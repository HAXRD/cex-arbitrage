# Spec Requirements Document

> Spec: BitGet API集成 - 实现交易所数据获取
> Created: 2025-10-07

## Overview

实现与 BitGet 交易所的 API 集成，封装 REST API 和 WebSocket 连接，获取合约列表、K线数据、实时价格和交易量数据，为后续的价格监控和信号捕捉功能提供数据基础。

## User Stories

### 数据获取开发者

作为一名后端开发者，我希望能够通过统一的客户端接口轻松获取 BitGet 合约数据，以便我可以专注于业务逻辑而不用关心底层 API 调用细节。

开发者通过调用封装好的 BitGet 客户端方法，即可获取合约列表、历史 K线数据和实时价格。客户端自动处理认证（公开数据无需认证）、错误重试、速率限制等问题，开发者只需处理业务数据。

### 系统稳定性维护者

作为一名系统维护者，我希望 WebSocket 连接能够自动处理断线重连和错误恢复，以便系统能够持续稳定地获取实时数据而无需人工干预。

当 WebSocket 连接意外断开时，系统会自动尝试重连（带指数退避），并在重连成功后自动重新订阅之前的交易对。所有重连过程都有完整的日志记录，便于问题排查。

### 价格监控功能开发者

作为一名功能开发者，我希望能够同时订阅多个交易对的实时价格和交易量数据，以便我可以实现并行监控多个市场的功能。

通过批量订阅接口，开发者可以一次性订阅 100+ 个交易对的实时 Ticker 数据，系统会通过回调函数实时推送价格、交易量变化，支持高并发数据处理。

## Spec Scope

1. **BitGet REST API 客户端** - 封装 REST API 调用，支持获取合约列表和 K线数据
2. **合约列表获取** - 获取所有 USDT 永续合约的交易对信息（交易对名称、最小交易量、价格精度等）
3. **K线数据获取** - 支持获取指定交易对的历史 K线数据（1m、5m、15m、1h等周期），包含开高低收价格和成交量
4. **WebSocket 连接管理** - 实现 WebSocket 连接的建立、维护、断线重连和错误处理
5. **实时 Ticker 订阅** - 支持批量订阅交易对的实时价格和交易量数据（最新价、24h涨跌幅、24h成交量等）
6. **自动重连机制** - 实现指数退避重连策略，支持心跳检测和连接健康监控

## Out of Scope

- 账户相关 API（余额查询、持仓查询等）
- 交易相关 API（下单、撤单、改单等）
- 币本位合约（仅支持 USDT 永续合约）
- 历史深度行情数据（订单簿数据）
- API 认证和签名（当前仅使用公开接口）
- 数据持久化（数据存储在"数据存储设计"任务中实现）

## Expected Deliverable

1. 可以通过 REST API 客户端成功获取所有 USDT 永续合约列表（至少 50+ 交易对）
2. 可以通过 REST API 客户端成功获取指定交易对的 K线数据，数据包含完整的价格和交易量信息
3. 可以通过 WebSocket 客户端成功订阅并接收至少 10 个交易对的实时 Ticker 数据
4. WebSocket 连接在意外断开后能够自动重连，并恢复订阅
5. 所有 API 调用都有完善的错误处理和日志记录，便于调试和监控

